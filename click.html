<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Popup Download Test</title>
<style>
/* ... styles tetap sama ... */
.download-frame {
  display: none;
}
</style>
</head>
<body>

<h3>Popup Download Test</h3>
<button id="btn">Download APK</button>
<iframe id="downloadFrame" class="download-frame"></iframe>
<pre id="log"></pre>

<script>
const logEl = document.getElementById("log");
const log = m => {
  logEl.textContent += `[${new Date().toLocaleTimeString()}] ${m}\n`;
  logEl.scrollTop = logEl.scrollHeight;
};

document.getElementById("btn").onclick = () => {
  log("User click diterima");
  
  // Metode 1: Coba download via iframe
  log("Mencoba download via iframe...");
  const frame = document.getElementById('downloadFrame');
  frame.src = 'https://oxfat.github.io/fake.apk';
  
  // Tunggu dan cek
  setTimeout(() => {
    log("Download mungkin sedang berjalan...");
    
    // Metode 2: Buka di tab baru sebagai fallback
    setTimeout(() => {
      if (confirm("Jika download belum mulai, buka di tab baru?")) {
        window.open('https://oxfat.github.io/fake.apk', '_blank');
        log("✅ hello");
      }
    }, 1500);
  }, 500);
};

// Deteksi jika browser memblokir popup
window.addEventListener('blur', () => {
  setTimeout(() => {
    if (document.hasFocus()) {
      log("⚠️ Popup mungkin diblokir oleh browser");
    }
  }, 100);
});
</script>
</body>
</html>
